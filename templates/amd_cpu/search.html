<!-- templates/amd_cpu/search.html -->
{% extends "base.html" %}

{% block title %}AMD CPU 搜索{% endblock %}

{% block content %}
<div class="container mt-5">
    <h1 class="mb-4">AMD CPU 搜索</h1>

    <div class="card mb-4">
        <div class="card-body">
            <form id="searchForm" method="get" action="{% url 'amd_cpu:search' %}">
                <div class="input-group">
                    <input type="text" class="form-control" id="searchInput" name="q"
                           placeholder="输入 CPU 代号 (例如: 829)" value="{{ search_term }}">
                    <div class="input-group-append">
                        <button class="btn btn-primary" type="submit">搜索</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div id="searchResults">
        {% if search_term and search_results %}
            <h2 class="mb-3">搜索结果: "{{ search_term }}"</h2>
            {% for cpu in search_results %}
                <div class="card mb-4">
                    <div class="card-header bg-danger text-white">
                        <h3 class="mb-0">{{ cpu.name }}</h3>
                    </div>
                    <div class="card-body">
                        <table class="table table-striped table-hover">
                            <tbody>
                                <tr>
                                    <th style="width:30%">ID</th>
                                    <td>{{ cpu.id }}</td>
                                </tr>
                                <tr>
                                    <th>产品代码</th>
                                    <td>
                                        {% if cpu.code1 %}{{ cpu.code1 }}{% endif %}
                                        {% if cpu.code2 %}, {{ cpu.code2 }}{% endif %}
                                        {% if cpu.code3 %}, {{ cpu.code3 }}{% endif %}
                                    </td>
                                </tr>
                                <tr>
                                    <th>核心数 / 线程数</th>
                                    <td>{{ cpu.cores }} / {{ cpu.threads }}</td>
                                </tr>
                                <tr>
                                    <th>GPU 核心数</th>
                                    <td>{{ cpu.gpu_cores }}</td>
                                </tr>
                                <tr>
                                    <th>频率</th>
                                    <td>基础: {{ cpu.base_clock }}<br>加速: {{ cpu.boost_clock }}</td>
                                </tr>
                                <tr>
                                    <th>缓存</th>
                                    <td>
                                        L1: {{ cpu.l1_cache }}<br>
                                        L2: {{ cpu.l2_cache }}<br>
                                        L3: {{ cpu.l3_cache }}
                                    </td>
                                </tr>
                                <tr>
                                    <th>制程工艺</th>
                                    <td>{{ cpu.process }}</td>
                                </tr>
                                <tr>
                                    <th>接口</th>
                                    <td>{{ cpu.socket }}</td>
                                </tr>
                                <tr>
                                    <th>PCIe / TDP</th>
                                    <td>{{ cpu.pcie }} / {{ cpu.tdp }}</td>
                                </tr>
                                <tr>
                                    <th>内存</th>
                                    <td>{{ cpu.memory }}</td>
                                </tr>
                                <tr>
                                    <th>集成显卡</th>
                                    <td>{{ cpu.gpu_name }} ({{ cpu.gpu_clock }})</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            {% endfor %}
        {% elif search_term %}
            <div class="alert alert-warning">
                没有找到代号包含 "{{ search_term }}" 的 CPU。
            </div>
        {% endif %}
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const input = document.getElementById('searchInput');
    // Focus search input on page load
    input.focus();

    // Select all text when clicking in the input
    input.addEventListener('click', function() {
        this.select();
    });
});
</script>
{% endblock %}